/**
 * @remix-run/router v1.0.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L.apply(this,arguments)}var F;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(F||(F={}));const Ne="popstate";function dr(e){e===void 0&&(e={});function t(n,a){let{pathname:d,search:s,hash:u}=n.location;return ue("",{pathname:d,search:s,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:H(a)}return Dt(t,r,null,e)}function Rt(){return Math.random().toString(36).substr(2,8)}function Ie(e){return{usr:e.state,key:e.key}}function ue(e,t,r,n){return r===void 0&&(r=null),L({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Q(t):t,{state:r,key:t&&t.key||n||Rt()})}function H(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Q(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function J(e){let t=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:"unknown://unknown",r=typeof e=="string"?e:H(e);return new URL(r,t)}function Dt(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:d=!1}=n,s=a.history,u=F.Pop,f=null;function w(){u=F.Pop,f&&f({action:u,location:i.location})}function h(g,E){u=F.Push;let b=ue(i.location,g,E);r&&r(b,g);let T=Ie(b),C=i.createHref(b);try{s.pushState(T,"",C)}catch{a.location.assign(C)}d&&f&&f({action:u,location:i.location})}function y(g,E){u=F.Replace;let b=ue(i.location,g,E);r&&r(b,g);let T=Ie(b),C=i.createHref(b);s.replaceState(T,"",C),d&&f&&f({action:u,location:i.location})}let i={get action(){return u},get location(){return e(a,s)},listen(g){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Ne,w),f=g,()=>{a.removeEventListener(Ne,w),f=null}},createHref(g){return t(a,g)},encodeLocation(g){let E=J(typeof g=="string"?g:H(g));return{pathname:E.pathname,search:E.search,hash:E.hash}},push:h,replace:y,go(g){return s.go(g)}};return i}var j;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(j||(j={}));function Pt(e){return e.index===!0}function Je(e,t,r){return t===void 0&&(t=[]),r===void 0&&(r=new Set),e.map((n,a)=>{let d=[...t,a],s=typeof n.id=="string"?n.id:d.join("-");return S(n.index!==!0||!n.children,"Cannot specify children on an index route"),S(!r.has(s),'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),r.add(s),Pt(n)?L({},n,{id:s}):L({},n,{id:s,children:n.children?Je(n.children,d,r):void 0})})}function ge(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?Q(t):t,a=_t(n.pathname||"/",r);if(a==null)return null;let d=Qe(e);Et(d);let s=null;for(let u=0;s==null&&u<d.length;++u)s=jt(d[u],Nt(a));return s}function Qe(e,t,r,n){return t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n=""),e.forEach((a,d)=>{let s={relativePath:a.path||"",caseSensitive:a.caseSensitive===!0,childrenIndex:d,route:a};s.relativePath.startsWith("/")&&(S(s.relativePath.startsWith(n),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(n.length));let u=de([n,s.relativePath]),f=r.concat(s);a.children&&a.children.length>0&&(S(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Qe(a.children,t,f,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:Tt(u,a.index),routesMeta:f})}),t}function Et(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Ft(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Mt=/^:\w+$/,St=3,xt=2,At=1,Lt=10,Ct=-2,_e=e=>e==="*";function Tt(e,t){let r=e.split("/"),n=r.length;return r.some(_e)&&(n+=Ct),t&&(n+=xt),r.filter(a=>!_e(a)).reduce((a,d)=>a+(Mt.test(d)?St:d===""?At:Lt),n)}function Ft(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function jt(e,t){let{routesMeta:r}=e,n={},a="/",d=[];for(let s=0;s<r.length;++s){let u=r[s],f=s===r.length-1,w=a==="/"?t:t.slice(a.length)||"/",h=Ut({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},w);if(!h)return null;Object.assign(n,h.params);let y=u.route;d.push({params:n,pathname:de([a,h.pathname]),pathnameBase:Ht(de([a,h.pathnameBase])),route:y}),h.pathnameBase!=="/"&&(a=de([a,h.pathnameBase]))}return d}function Ut(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Ot(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let d=a[0],s=d.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((w,h,y)=>{if(h==="*"){let i=u[y]||"";s=d.slice(0,d.length-i.length).replace(/(.)\/+$/,"$1")}return w[h]=It(u[y]||"",h),w},{}),pathname:d,pathnameBase:s,pattern:e}}function Ot(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Se(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(s,u)=>(n.push(u),"([^\\/]+)"));return e.endsWith("*")?(n.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Nt(e){try{return decodeURI(e)}catch(t){return Se(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function It(e,t){try{return decodeURIComponent(e)}catch(r){return Se(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function _t(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function S(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Se(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Bt(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Q(e):e;return{pathname:r?r.startsWith("/")?r:$t(r,t):t,search:Kt(n),hash:zt(a)}}function $t(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Pe(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xe(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Wt(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Q(e):(a=L({},e),S(!a.pathname||!a.pathname.includes("?"),Pe("?","pathname","search",a)),S(!a.pathname||!a.pathname.includes("#"),Pe("#","pathname","hash",a)),S(!a.search||!a.search.includes("#"),Pe("#","search","hash",a)));let d=e===""||a.pathname==="",s=d?"/":a.pathname,u;if(n||s==null)u=r;else{let y=t.length-1;if(s.startsWith("..")){let i=s.split("/");for(;i[0]==="..";)i.shift(),y-=1;a.pathname=i.join("/")}u=y>=0?t[y]:"/"}let f=Bt(a,u),w=s&&s!=="/"&&s.endsWith("/"),h=(d||s===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(w||h)&&(f.pathname+="/"),f}const de=e=>e.join("/").replace(/\/\/+/g,"/"),Ht=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zt=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Be extends Error{}class Vt{constructor(t){this.pendingKeys=new Set,this.subscriber=void 0,S(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((a,d)=>r=d),this.controller=new AbortController;let n=()=>r(new Be("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",n),this.controller.signal.addEventListener("abort",n),this.data=Object.entries(t).reduce((a,d)=>{let[s,u]=d;return Object.assign(a,{[s]:this.trackPromise(s,u)})},{})}trackPromise(t,r){if(!(r instanceof Promise))return r;this.pendingKeys.add(t);let n=Promise.race([r,this.abortPromise]).then(a=>this.onSettle(n,t,null,a),a=>this.onSettle(n,t,a));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,a){if(this.controller.signal.aborted&&n instanceof Be)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n);this.pendingKeys.delete(r),this.done&&this.unlistenAbortSignal();const d=this.subscriber;return n?(Object.defineProperty(t,"_error",{get:()=>n}),d&&d(!1),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>a}),d&&d(!1),a)}subscribe(t){this.subscriber=t}cancel(){this.controller.abort(),this.pendingKeys.forEach((r,n)=>this.pendingKeys.delete(n));let t=this.subscriber;t&&t(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(a=>{this.subscribe(d=>{t.removeEventListener("abort",n),(d||this.done)&&a(d)})})}return r}get done(){return this.pendingKeys.size===0}get unwrappedData(){return S(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,a]=r;return Object.assign(t,{[n]:Gt(a)})},{})}}function Yt(e){return e instanceof Promise&&e._tracked===!0}function Gt(e){if(!Yt(e))return e;if(e._error)throw e._error;return e._data}class xe{constructor(t,r,n,a){a===void 0&&(a=!1),this.status=t,this.statusText=r||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function qt(e){return e instanceof xe}const Ze=["post","put","patch","delete"],Jt=new Set(Ze),Qt=["get",...Ze],Xt=new Set(Qt),Zt=new Set([301,302,303,307,308]),kt=new Set([307,308]),Ee={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},er={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},tr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rr=!tr;function cr(e){S(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=Je(e.routes),r=null,n=new Set,a=null,d=null,s=null,u=!1,f=ge(t,e.history.location,e.basename),w=null;if(f==null){let o=G(404,{pathname:e.history.location.pathname}),{matches:l,route:c}=ze(t);f=l,w={[c.id]:o}}let h=!f.some(o=>o.route.loader)||e.hydrationData!=null,y,i={historyAction:e.history.action,location:e.history.location,matches:f,initialized:h,navigation:Ee,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||w,fetchers:new Map},g=F.Pop,E=!1,b,T=!1,C=!1,_=[],B=[],x=new Map,K=0,ye=-1,ae=new Map,fe=new Set,X=new Map,z=new Map;function it(){return r=e.history.listen(o=>{let{action:l,location:c}=o;return V(l,c)}),i.initialized||V(F.Pop,i.location),y}function ot(){r&&r(),n.clear(),b&&b.abort(),i.fetchers.forEach((o,l)=>be(l))}function lt(o){return n.add(o),()=>n.delete(o)}function I(o){i=L({},i,o),n.forEach(l=>l(i))}function ie(o,l){var c;let m=i.actionData!=null&&i.navigation.formMethod!=null&&i.navigation.state==="loading"&&((c=i.navigation.formAction)==null?void 0:c.split("?")[0])===o.pathname,p=l.loaderData?{loaderData:Me(i.loaderData,l.loaderData,l.matches||[])}:{};I(L({},m?{}:{actionData:null},l,p,{historyAction:g,location:o,initialized:!0,navigation:Ee,revalidation:"idle",restoreScrollPosition:i.navigation.formData?!1:Fe(o,l.matches||i.matches),preventScrollReset:E})),T||g===F.Pop||(g===F.Push?e.history.push(o,o.state):g===F.Replace&&e.history.replace(o,o.state)),g=F.Pop,E=!1,T=!1,C=!1,_=[],B=[]}async function st(o,l){if(typeof o=="number"){e.history.go(o);return}let{path:c,submission:m,error:p}=$e(o,l),v=ue(i.location,c,l&&l.state);v=L({},v,e.history.encodeLocation(v));let D=(l&&l.replace)===!0||m!=null?F.Replace:F.Push,R=l&&"preventScrollReset"in l?l.preventScrollReset===!0:void 0;return await V(D,v,{submission:m,pendingError:p,preventScrollReset:R,replace:l&&l.replace})}function dt(){if(ve(),I({revalidation:"loading"}),i.navigation.state!=="submitting"){if(i.navigation.state==="idle"){V(i.historyAction,i.location,{startUninterruptedRevalidation:!0});return}V(g||i.historyAction,i.navigation.location,{overrideNavigation:i.navigation})}}async function V(o,l,c){b&&b.abort(),b=null,g=o,T=(c&&c.startUninterruptedRevalidation)===!0,yt(i.location,i.matches),E=(c&&c.preventScrollReset)===!0;let m=c&&c.overrideNavigation,p=ge(t,l,e.basename);if(!p){let U=G(404,{pathname:l.pathname}),{matches:Z,route:$}=ze(t);Re(),ie(l,{matches:Z,loaderData:{},errors:{[$.id]:U}});return}if(lr(i.location,l)){ie(l,{matches:p});return}b=new AbortController;let v=se(l,b.signal,c&&c.submission),D,R;if(c&&c.pendingError)R={[re(p).route.id]:c.pendingError};else if(c&&c.submission){let U=await ct(v,l,c.submission,p,{replace:c.replace});if(U.shortCircuited)return;D=U.pendingActionData,R=U.pendingActionError,m=L({state:"loading",location:l},c.submission)}let{shortCircuited:P,loaderData:M,errors:A}=await ut(v,l,p,m,c&&c.submission,c&&c.replace,D,R);P||(b=null,ie(l,{matches:p,loaderData:M,errors:A}))}async function ct(o,l,c,m,p){ve();let v=L({state:"submitting",location:l},c);I({navigation:v});let D,R=qe(m,l);if(!R.route.action)D={type:j.error,error:G(405,{method:o.method,pathname:l.pathname,routeId:R.route.id})};else if(D=await le("action",o,R,m,y.basename),o.signal.aborted)return{shortCircuited:!0};if(ne(D))return await oe(i,D,p&&p.replace===!0),{shortCircuited:!0};if(ce(D)){let P=re(m,R.route.id);return(p&&p.replace)!==!0&&(g=F.Push),{pendingActionError:{[P.route.id]:D.error}}}if(q(D))throw new Error("defer() is not supported in actions");return{pendingActionData:{[R.route.id]:D.data}}}async function ut(o,l,c,m,p,v,D,R){let P=m;P||(P={state:"loading",location:l,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[M,A]=We(i,c,p,l,C,_,B,D,R,X);if(Re(O=>!(c&&c.some(N=>N.route.id===O))||M&&M.some(N=>N.route.id===O)),M.length===0&&A.length===0)return ie(l,{matches:c,loaderData:Me(i.loaderData,{},c),errors:R||null,actionData:D||null}),{shortCircuited:!0};T||(A.forEach(O=>{let[N]=O,te=i.fetchers.get(N),pe={state:"loading",data:te&&te.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(N,pe)}),I(L({navigation:P,actionData:D||i.actionData||null},A.length>0?{fetchers:new Map(i.fetchers)}:{}))),ye=++K,A.forEach(O=>{let[N]=O;return x.set(N,b)});let{results:U,loaderResults:Z,fetcherResults:$}=await Le(i.matches,c,M,A,o);if(o.signal.aborted)return{shortCircuited:!0};A.forEach(O=>{let[N]=O;return x.delete(N)});let k=Ve(U);if(k)return await oe(i,k,v),{shortCircuited:!0};let{loaderData:De,errors:me}=Ke(i,c,M,Z,R,A,$,z);z.forEach((O,N)=>{O.subscribe(te=>{(te||O.done)&&z.delete(N)})}),pt();let ee=Te(ye);return L({loaderData:De,errors:me},ee||A.length>0?{fetchers:new Map(i.fetchers)}:{})}function Ae(o){return i.fetchers.get(o)||er}function ft(o,l,c,m){if(rr)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");x.has(o)&&he(o);let p=ge(t,c,e.basename);if(!p){we(o,l,G(404,{pathname:c}));return}let{path:v,submission:D}=$e(c,m,!0),R=qe(p,v);if(D){ht(o,l,v,R,p,D);return}X.set(o,[v,R,p]),mt(o,l,v,R,p)}async function ht(o,l,c,m,p,v){if(ve(),X.delete(o),!m.route.action){let W=G(405,{method:v.formMethod,pathname:c,routeId:l});we(o,l,W);return}let D=i.fetchers.get(o),R=L({state:"submitting"},v,{data:D&&D.data});i.fetchers.set(o,R),I({fetchers:new Map(i.fetchers)});let P=new AbortController,M=se(c,P.signal,v);x.set(o,P);let A=await le("action",M,m,p,y.basename);if(M.signal.aborted){x.get(o)===P&&x.delete(o);return}if(ne(A)){x.delete(o),fe.add(o);let W=L({state:"loading"},v,{data:void 0});return i.fetchers.set(o,W),I({fetchers:new Map(i.fetchers)}),oe(i,A)}if(ce(A)){we(o,l,A.error);return}q(A)&&S(!1,"defer() is not supported in actions");let U=i.navigation.location||i.location,Z=se(U,P.signal),$=i.navigation.state!=="idle"?ge(t,i.navigation.location,e.basename):i.matches;S($,"Didn't find any matches after fetcher action");let k=++K;ae.set(o,k);let De=L({state:"loading",data:A.data},v);i.fetchers.set(o,De);let[me,ee]=We(i,$,v,U,C,_,B,{[m.route.id]:A.data},void 0,X);ee.filter(W=>{let[Y]=W;return Y!==o}).forEach(W=>{let[Y]=W,Oe=i.fetchers.get(Y),bt={state:"loading",data:Oe&&Oe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(Y,bt),x.set(Y,P)}),I({fetchers:new Map(i.fetchers)});let{results:O,loaderResults:N,fetcherResults:te}=await Le(i.matches,$,me,ee,Z);if(P.signal.aborted)return;ae.delete(o),x.delete(o),ee.forEach(W=>{let[Y]=W;return x.delete(Y)});let pe=Ve(O);if(pe)return oe(i,pe);let{loaderData:je,errors:Ue}=Ke(i,i.matches,me,N,void 0,ee,te,z),vt={state:"idle",data:A.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(o,vt);let wt=Te(k);i.navigation.state==="loading"&&k>ye?(S(g,"Expected pending action"),b&&b.abort(),ie(i.navigation.location,{matches:$,loaderData:je,errors:Ue,fetchers:new Map(i.fetchers)})):(I(L({errors:Ue,loaderData:Me(i.loaderData,je,$)},wt?{fetchers:new Map(i.fetchers)}:{})),C=!1)}async function mt(o,l,c,m,p){let v=i.fetchers.get(o),D={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:v&&v.data};i.fetchers.set(o,D),I({fetchers:new Map(i.fetchers)});let R=new AbortController,P=se(c,R.signal);x.set(o,R);let M=await le("loader",P,m,p,y.basename);if(q(M)&&(M=await nt(M,P.signal,!0)||M),x.get(o)===R&&x.delete(o),P.signal.aborted)return;if(ne(M)){await oe(i,M);return}if(ce(M)){let U=re(i.matches,l);i.fetchers.delete(o),I({fetchers:new Map(i.fetchers),errors:{[U.route.id]:M.error}});return}S(!q(M),"Unhandled fetcher deferred data");let A={state:"idle",data:M.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(o,A),I({fetchers:new Map(i.fetchers)})}async function oe(o,l,c){l.revalidate&&(C=!0);let m=ue(o.location,l.location);if(S(m,"Expected a location on the redirect navigation"),l.external&&typeof window<"u"&&typeof window.location<"u"){c?window.location.replace(l.location):window.location.assign(l.location);return}b=null;let p=c===!0?F.Replace:F.Push,{formMethod:v,formAction:D,formEncType:R,formData:P}=o.navigation;kt.has(l.status)&&v&&rt(v)&&R&&P?await V(p,m,{submission:{formMethod:v,formAction:l.location,formEncType:R,formData:P}}):await V(p,m,{overrideNavigation:{state:"loading",location:m,formMethod:v||void 0,formAction:D||void 0,formEncType:R||void 0,formData:P||void 0}})}async function Le(o,l,c,m,p){let v=await Promise.all([...c.map(P=>le("loader",p,P,l,y.basename)),...m.map(P=>{let[,M,A,U]=P;return le("loader",se(M,p.signal),A,U,y.basename)})]),D=v.slice(0,c.length),R=v.slice(c.length);return await Promise.all([Ye(o,c,D,p.signal,!1,i.loaderData),Ye(o,m.map(P=>{let[,,M]=P;return M}),R,p.signal,!0)]),{results:v,loaderResults:D,fetcherResults:R}}function ve(){C=!0,_.push(...Re()),X.forEach((o,l)=>{x.has(l)&&(B.push(l),he(l))})}function we(o,l,c){let m=re(i.matches,l);be(o),I({errors:{[m.route.id]:c},fetchers:new Map(i.fetchers)})}function be(o){x.has(o)&&he(o),X.delete(o),ae.delete(o),fe.delete(o),i.fetchers.delete(o)}function he(o){let l=x.get(o);S(l,"Expected fetch controller: "+o),l.abort(),x.delete(o)}function Ce(o){for(let l of o){let m={state:"idle",data:Ae(l).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(l,m)}}function pt(){let o=[];for(let l of fe){let c=i.fetchers.get(l);S(c,"Expected fetcher: "+l),c.state==="loading"&&(fe.delete(l),o.push(l))}Ce(o)}function Te(o){let l=[];for(let[c,m]of ae)if(m<o){let p=i.fetchers.get(c);S(p,"Expected fetcher: "+c),p.state==="loading"&&(he(c),ae.delete(c),l.push(c))}return Ce(l),l.length>0}function Re(o){let l=[];return z.forEach((c,m)=>{(!o||o(m))&&(c.cancel(),l.push(m),z.delete(m))}),l}function gt(o,l,c){if(a=o,s=l,d=c||(m=>m.key),!u&&i.navigation===Ee){u=!0;let m=Fe(i.location,i.matches);m!=null&&I({restoreScrollPosition:m})}return()=>{a=null,s=null,d=null}}function yt(o,l){if(a&&d&&s){let c=l.map(p=>Ge(p,i.loaderData)),m=d(o,c)||o.key;a[m]=s()}}function Fe(o,l){if(a&&d&&s){let c=l.map(v=>Ge(v,i.loaderData)),m=d(o,c)||o.key,p=a[m];if(typeof p=="number")return p}return null}return y={get basename(){return e.basename},get state(){return i},get routes(){return t},initialize:it,subscribe:lt,enableScrollRestoration:gt,navigate:st,fetch:ft,revalidate:dt,createHref:o=>e.history.createHref(o),encodeLocation:o=>e.history.encodeLocation(o),getFetcher:Ae,deleteFetcher:be,dispose:ot,_internalFetchControllers:x,_internalActiveDeferreds:z},y}function nr(e){return e!=null&&"formData"in e}function $e(e,t,r){r===void 0&&(r=!1);let n=typeof e=="string"?e:H(e);if(!t||!nr(t))return{path:n};if(t.formMethod&&!sr(t.formMethod))return{path:n,error:G(405,{method:t.formMethod})};if(t.formMethod&&rt(t.formMethod))return{path:n,submission:{formMethod:t.formMethod,formAction:tt(n),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}};let a=Q(n);try{let d=et(t.formData);r&&a.search&&at(a.search)&&d.append("index",""),a.search="?"+d}catch{return{path:n,error:G(400)}}return{path:H(a)}}function ar(e,t){let r=e;if(t){let n=e.findIndex(a=>a.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function We(e,t,r,n,a,d,s,u,f,w){let h=f?Object.values(f)[0]:u?Object.values(u)[0]:null,y=f?Object.keys(f)[0]:void 0,g=ar(t,y).filter((b,T)=>b.route.loader!=null&&(ir(e.loaderData,e.matches[T],b)||d.some(C=>C===b.route.id)||He(e.location,e.matches[T],r,n,b,a,h))),E=[];return w&&w.forEach((b,T)=>{let[C,_,B]=b;s.includes(T)?E.push([T,C,_,B]):a&&He(C,_,r,C,_,a,h)&&E.push([T,C,_,B])}),[g,E]}function ir(e,t,r){let n=!t||r.route.id!==t.route.id,a=e[r.route.id]===void 0;return n||a}function ke(e,t){let r=e.route.path;return e.pathname!==t.pathname||r&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function He(e,t,r,n,a,d,s){let u=J(e),f=t.params,w=J(n),h=a.params,y=ke(t,a)||u.toString()===w.toString()||u.search!==w.search||d;if(a.route.shouldRevalidate){let i=a.route.shouldRevalidate(L({currentUrl:u,currentParams:f,nextUrl:w,nextParams:h},r,{actionResult:s,defaultShouldRevalidate:y}));if(typeof i=="boolean")return i}return y}async function le(e,t,r,n,a,d,s){a===void 0&&(a="/"),d===void 0&&(d=!1),s===void 0&&(s=!1);let u,f,w,h=new Promise((i,g)=>w=g),y=()=>w();t.signal.addEventListener("abort",y);try{let i=r.route[e];S(i,"Could not find the "+e+' to run on the "'+r.route.id+'" route'),f=await Promise.race([i({request:t,params:r.params}),h]),S(f!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(i){u=j.error,f=i}finally{t.signal.removeEventListener("abort",y)}if(f instanceof Response){let i=f.status;if(Zt.has(i)){let b=f.headers.get("Location");S(b,"Redirects returned/thrown from loaders/actions must have a Location header");let T=J(b).origin!==J("/").origin;if(!T){let C=n.slice(0,n.indexOf(r)+1),_=Xe(C).map(K=>K.pathnameBase),B=J(t.url).pathname,x=Wt(b,_,B);if(S(H(x),"Unable to resolve redirect location: "+b),a){let K=x.pathname;x.pathname=K==="/"?a:de([a,K])}b=H(x)}if(d)throw f.headers.set("Location",b),f;return{type:j.redirect,status:i,location:b,revalidate:f.headers.get("X-Remix-Revalidate")!==null,external:T}}if(s)throw{type:u||j.data,response:f};let g,E=f.headers.get("Content-Type");return E&&E.startsWith("application/json")?g=await f.json():g=await f.text(),u===j.error?{type:u,error:new xe(i,f.statusText,g),headers:f.headers}:{type:j.data,data:g,statusCode:f.status,headers:f.headers}}return u===j.error?{type:u,error:f}:f instanceof Vt?{type:j.deferred,deferredData:f}:{type:j.data,data:f}}function se(e,t,r){let n=J(tt(e)).toString(),a={signal:t};if(r){let{formMethod:d,formEncType:s,formData:u}=r;a.method=d.toUpperCase(),a.body=s==="application/x-www-form-urlencoded"?et(u):u}return new Request(n,a)}function et(e){let t=new URLSearchParams;for(let[r,n]of e.entries())S(typeof n=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),t.append(r,n);return t}function or(e,t,r,n,a){let d={},s=null,u,f=!1,w={};return r.forEach((h,y)=>{let i=t[y].route.id;if(S(!ne(h),"Cannot handle redirect results in processLoaderData"),ce(h)){let g=re(e,i),E=h.error;n&&(E=Object.values(n)[0],n=void 0),s=Object.assign(s||{},{[g.route.id]:E}),f||(f=!0,u=qt(h.error)?h.error.status:500),h.headers&&(w[i]=h.headers)}else q(h)?(a&&a.set(i,h.deferredData),d[i]=h.deferredData.data):(d[i]=h.data,h.statusCode!=null&&h.statusCode!==200&&!f&&(u=h.statusCode),h.headers&&(w[i]=h.headers))}),n&&(s=n),{loaderData:d,errors:s,statusCode:u||200,loaderHeaders:w}}function Ke(e,t,r,n,a,d,s,u){let{loaderData:f,errors:w}=or(t,r,n,a,u);for(let h=0;h<d.length;h++){let[y,,i]=d[h];S(s!==void 0&&s[h]!==void 0,"Did not find corresponding fetcher result");let g=s[h];if(ce(g)){let E=re(e.matches,i.route.id);w&&w[E.route.id]||(w=L({},w,{[E.route.id]:g.error})),e.fetchers.delete(y)}else{if(ne(g))throw new Error("Unhandled fetcher revalidation redirect");if(q(g))throw new Error("Unhandled fetcher deferred data");{let E={state:"idle",data:g.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(y,E)}}}return{loaderData:f,errors:w}}function Me(e,t,r){let n=L({},t);return r.forEach(a=>{let d=a.route.id;t[d]===void 0&&e[d]!==void 0&&(n[d]=e[d])}),n}function re(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function ze(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function G(e,t){let{pathname:r,routeId:n,method:a,message:d}=t===void 0?{}:t,s="Unknown Server Error",u="Unknown @remix-run/router error";return e===400?(s="Bad Request",a&&r&&n?u="You made a "+a+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":u="Cannot submit binary form data using GET"):e===403?(s="Forbidden",u='Route "'+n+'" does not match URL "'+r+'"'):e===404?(s="Not Found",u='No route matches URL "'+r+'"'):e===405&&(s="Method Not Allowed",a&&r&&n?u="You made a "+a.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":a&&(u='Invalid request method "'+a.toUpperCase()+'"')),new xe(e||500,s,new Error(u),!0)}function Ve(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(ne(r))return r}}function tt(e){let t=typeof e=="string"?Q(e):e;return H(L({},t,{hash:""}))}function lr(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function q(e){return e.type===j.deferred}function ce(e){return e.type===j.error}function ne(e){return(e&&e.type)===j.redirect}function sr(e){return Xt.has(e)}function rt(e){return Jt.has(e)}async function Ye(e,t,r,n,a,d){for(let s=0;s<r.length;s++){let u=r[s],f=t[s],w=e.find(y=>y.route.id===f.route.id),h=w!=null&&!ke(w,f)&&(d&&d[f.route.id])!==void 0;q(u)&&(a||h)&&await nt(u,n,a).then(y=>{y&&(r[s]=y||r[s])})}}async function nt(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:j.data,data:e.deferredData.unwrappedData}}catch(a){return{type:j.error,error:a}}return{type:j.data,data:e.deferredData.data}}}function at(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ge(e,t){let{route:r,pathname:n,params:a}=e;return{id:r.id,pathname:n,params:a,data:t[r.id],handle:r.handle}}function qe(e,t){let r=typeof t=="string"?Q(t).search:t.search;if(e[e.length-1].route.index&&at(r||""))return e[e.length-1];let n=Xe(e);return n[n.length-1]}export{F as A,xe as E,qt as a,dr as b,cr as c,Xe as g,S as i,de as j,ge as m,Q as p,Wt as r,_t as s};
